<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Checkout - Senior Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/opendyslexic@2.0.0/open-dyslexic.min.css" rel="stylesheet">
    <style>
        :root { --primary: #208090; --bg-color: #F8FAFC; --focus-ring: #F59E0B; }
        body { font-family: 'Source Sans 3', sans-serif; background-color: var(--bg-color); line-height: 1.6; }
        .input-lg { width: 100%; padding: 18px; font-size: 1.25rem; border: 2px solid #9CA3AF; border-radius: 8px; margin-top: 8px; }
        .input-lg:focus { border-color: #208090; outline: 4px solid var(--focus-ring); }
        .error-msg { color: #DC2626; font-weight: bold; margin-top: 4px; display: none; }
        /* A11y Menu */
        .a11y-menu { display: none; position: absolute; top: 100%; right: 0; width: 340px; background: white; border: 2px solid #208090; padding: 20px; z-index: 50; box-shadow: 0 10px 25px rgba(0,0,0,0.2); border-radius: 12px; }
        .a11y-menu.open { display: block; }
        *:focus-visible { outline: 4px solid var(--focus-ring) !important; outline-offset: 2px; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <a href="#checkout-form" class="absolute -top-96 left-0 bg-[#208090] text-white p-4 z-50 focus:top-0 text-xl font-bold transition-all">Skip to Form</a>

    <header class="bg-white shadow-md relative z-40 p-4" role="banner">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <a href="index.html" class="flex items-center gap-3 group" aria-label="Home">
                <div class="w-14 h-14 bg-[#208090] rounded-full flex items-center justify-center text-white text-3xl font-bold" aria-hidden="true">S</div>
                <span class="text-3xl font-bold text-[#208090]">Senior Shop</span>
            </a>
            
            <div class="flex items-center gap-3">
                <div class="relative">
                    <button id="a11y-btn" onclick="toggleMenu()" class="flex items-center gap-2 bg-gray-100 border-2 border-gray-400 text-gray-800 px-4 py-3 rounded-lg font-bold hover:bg-gray-200 shadow-sm" aria-expanded="false" aria-controls="a11y-menu">
                        <span class="text-2xl" aria-hidden="true">♿</span> <span class="text-lg">Settings</span>
                    </button>
                    <div id="a11y-menu" class="a11y-menu text-left">
                        <button onclick="toggleMenu()" class="text-red-600 underline font-bold text-lg mb-4" aria-label="Close settings">Close</button>
                        <button onclick="setContrast('high')" class="w-full text-left p-3 hover:bg-gray-100 font-bold border-b bg-black text-yellow-300">High Contrast</button>
                        <div class="flex items-center justify-between p-3 hover:bg-gray-100">
                            <label class="font-bold cursor-pointer" for="large-mode-pay">Large Buttons</label>
                            <input type="checkbox" id="large-mode-pay" onchange="toggleLargeTargets()" class="w-6 h-6">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 max-w-2xl" role="main">
        <h1 class="text-3xl font-bold mb-6">Checkout Details</h1>
        
        <form id="checkout-form" onsubmit="validateAndSubmit(event)" class="bg-white p-6 rounded-xl shadow border border-gray-200" novalidate>
            
            <div class="mb-8">
                <h2 class="text-xl font-bold mb-4 bg-gray-100 p-3 rounded text-[#208090]">Shipping Address</h2>
                
                <div class="mb-4">
                    <label for="name" class="block text-lg font-bold">Full Name (Required)</label>
                    <input type="text" id="name" class="input-lg" placeholder="e.g. Martha Smith" autocomplete="name" required aria-required="true">
                    <span id="name-error" class="error-msg" role="alert">Please enter your full name.</span>
                </div>

                <div class="mb-4">
                    <label for="address" class="block text-lg font-bold">Address (Required)</label>
                    <input type="text" id="address" class="input-lg" placeholder="e.g. 123 Maple Avenue" autocomplete="street-address" required aria-required="true">
                    <span id="address-error" class="error-msg" role="alert">Please enter your address.</span>
                </div>

                <div class="mb-4">
                    <label for="zip" class="block text-lg font-bold">Zip Code (Required)</label>
                    <input type="tel" id="zip" class="input-lg" placeholder="12345" autocomplete="postal-code" required aria-required="true">
                    <span id="zip-error" class="error-msg" role="alert">Please enter your 5-digit zip code.</span>
                </div>
            </div>

            <div class="mb-8">
                <h2 class="text-xl font-bold mb-4 bg-gray-100 p-3 rounded text-[#208090]">Payment</h2>
                <label class="flex items-center p-4 border-4 border-[#208090] bg-blue-50 rounded-xl cursor-pointer">
                    <input type="radio" name="payment" class="w-8 h-8 accent-[#208090]" checked>
                    <div class="ml-4">
                        <span class="block text-xl font-bold">Cash on Delivery</span>
                        <span class="block text-gray-700">Pay when it arrives.</span>
                    </div>
                </label>
            </div>

            <div class="flex flex-col-reverse md:flex-row gap-4 items-center justify-between mt-8 pt-6 border-t">
                <a href="cart.html" class="text-xl font-bold text-gray-600 underline">← Back to Cart</a>
                <button type="submit" class="bg-[#208090] text-white text-2xl font-bold py-4 px-12 rounded-xl shadow-lg hover:bg-[#165E6A] w-full md:w-auto">
                    Confirm Order
                </button>
            </div>
        </form>
    </main>

    <footer class="bg-gray-800 text-white pt-12 pb-6 mt-12 text-center" role="contentinfo">
        <p class="text-xl mb-4">© 2026 Senior Shop.</p>
    </footer>

    <script src="script.js"></script>
    <script>
        function validateAndSubmit(event) {
            event.preventDefault();
            let isValid = true;
            
            ['name', 'address', 'zip'].forEach(id => {
                const field = document.getElementById(id);
                const error = document.getElementById(id + '-error');
                
                if (!field.value.trim()) {
                    error.style.display = 'block';
                    field.setAttribute('aria-invalid', 'true');
                    field.style.borderColor = '#DC2626';
                    if(isValid) field.focus(); 
                    isValid = false;
                } else {
                    error.style.display = 'none';
                    field.setAttribute('aria-invalid', 'false');
                    field.style.borderColor = '#9CA3AF';
                }
            });

            if (isValid) {
                placeOrder(event);
            }
        }
    </script>
</body>
</html>
